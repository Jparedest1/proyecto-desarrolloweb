<div class="container mt-5">
  <div class="row justify-content-center">
      <div class="col-md-8">
          <div class="card">
              <div class="card-header bg-primary text-white d-flex justify-content-between align-items-start">
                  <h2 class="mb-0">Crear Nuevo Producto</h2>
                
                  <li class="mb-0 list-unstyled">
                      <a href="#" class="text-decoration-none text-light" (click)="irAPagina($event, '/proveedor/crear')">
                          <i class="bi bi-person-vcard me-2"></i>Crear Proveedor
                      </a>
                  </li>
                  
                  <li class="mb-0 list-unstyled">
                      <a href="#" class="text-decoration-none text-light">
                          <i class="bi bi-house me-2"></i> Home
                      </a>
                  </li>
              </div>              

              <div class="card-body">
                  <form [formGroup]="productoForm" (ngSubmit)="onSubmit()" class="needs-validation">
                      <div class="mb-3">
                          <label for="idProducto" class="form-label">ID Producto</label>
                          <input type="number" class="form-control" id="idProducto" formControlName="idProducto" required>
                          <div class="invalid-feedback" *ngIf="productoForm.get('idProducto')?.invalid && (productoForm.get('idProducto')?.dirty || productoForm.get('idProducto')?.touched)">
                              ID es requerido.
                          </div>
                      </div>
      
                      <div class="mb-3">
                          <label for="descripcion" class="form-label">Descripción</label>
                          <input type="text" class="form-control" id="descripcion" formControlName="descripcion" required>
                          <div class="invalid-feedback" *ngIf="productoForm.get('descripcion')?.invalid && (productoForm.get('descripcion')?.dirty || productoForm.get('descripcion')?.touched)">
                              Descripción es requerida.
                          </div>
                      </div>

                      <!-- Campo agregado para Precio Unitario -->
                      <div class="mb-3">
                          <label for="precioUnitario" class="form-label">Precio Unitario</label>
                          <input type="number" class="form-control" id="precioUnitario" formControlName="precioUnitario" required>
                          <div class="invalid-feedback" *ngIf="productoForm.get('precioUnitario')?.invalid && (productoForm.get('precioUnitario')?.dirty || productoForm.get('precioUnitario')?.touched)">
                              Precio unitario es requerido y debe ser un número positivo.
                          </div>
                      </div>

                      <div class="mb-3">
                          <label for="idProveedor" class="form-label">Proveedor</label>
                          <select class="form-select" id="idProveedor" formControlName="idProveedor" required>
                              <option value="">Seleccionar proveedor</option>
                              <option *ngFor="let proveedor of proveedores" [value]="proveedor.idProveedor">
                                  {{ proveedor.nombreProveedor }}
                              </option>
                          </select>
                          <div class="invalid-feedback" *ngIf="productoForm.get('idProveedor')?.invalid && (productoForm.get('idProveedor')?.dirty || productoForm.get('idProveedor')?.touched)">
                              Proveedor es requerido.
                          </div>
                      </div>
      
                      <div class="mb-3">
                          <label for="fechaVencimiento" class="form-label">Fecha de Vencimiento</label>
                          <input type="date" class="form-control" id="fechaVencimiento" formControlName="fechaVencimiento" required>
                          <div class="invalid-feedback" *ngIf="productoForm.get('fechaVencimiento')?.invalid && (productoForm.get('fechaVencimiento')?.dirty || productoForm.get('fechaVencimiento')?.touched)">
                              Fecha de vencimiento es requerida.
                          </div>
                      </div>
      
                      <div class="mb-3">
                          <label for="ubicacionFisica" class="form-label">Ubicación Física</label>
                          <input type="text" class="form-control" id="ubicacionFisica" formControlName="ubicacionFisica" required>
                          <div class="invalid-feedback" *ngIf="productoForm.get('ubicacionFisica')?.invalid && (productoForm.get('ubicacionFisica')?.dirty || productoForm.get('ubicacionFisica')?.touched)">
                              Ubicación física es requerida.
                          </div>
                      </div>
      
                      <div class="mb-3">
                          <label for="existenciaMinima" class="form-label">Existencia Mínima</label>
                          <input type="number" class="form-control" id="existenciaMinima" formControlName="existenciaMinima" required>
                          <div class="invalid-feedback" *ngIf="productoForm.get('existenciaMinima')?.invalid && (productoForm.get('existenciaMinima')?.dirty || productoForm.get('existenciaMinima')?.touched)">
                              Existencia mínima es requerida y debe ser un número positivo.
                          </div>
                      </div>
      
                      <button type="submit" class="btn btn-primary" [disabled]="!productoForm.valid || isLoading">
                          <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                          Crear Producto
                      </button>
                  </form>
      
                  <div *ngIf="errorMessage" class="alert alert-danger mt-3">
                      {{ errorMessage }}
                  </div>
      
                  <div *ngIf="successMessage" class="alert alert-success mt-3">
                      {{ successMessage }}
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
